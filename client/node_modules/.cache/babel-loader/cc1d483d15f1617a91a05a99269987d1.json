{"ast":null,"code":"import _createForOfIteratorHelper from \"C:/Users/1867792/up_pro/client/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _objectSpread from \"C:/Users/1867792/up_pro/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"C:/Users/1867792/up_pro/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/1867792/up_pro/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { transformToViewState, applyViewStateToTransform, cloneTransform } from '../utils/transform';\nimport { normalizeStyle } from '../utils/style-utils';\nimport { deepEqual } from '../utils/deep-equal';\nvar pointerEvents = {\n  mousedown: 'onMouseDown',\n  mouseup: 'onMouseUp',\n  mouseover: 'onMouseOver',\n  mousemove: 'onMouseMove',\n  click: 'onClick',\n  dblclick: 'onDblClick',\n  mouseenter: 'onMouseEnter',\n  mouseleave: 'onMouseLeave',\n  mouseout: 'onMouseOut',\n  contextmenu: 'onContextMenu',\n  touchstart: 'onTouchStart',\n  touchend: 'onTouchEnd',\n  touchmove: 'onTouchMove',\n  touchcancel: 'onTouchCancel'\n};\nvar cameraEvents = {\n  movestart: 'onMoveStart',\n  move: 'onMove',\n  moveend: 'onMoveEnd',\n  dragstart: 'onDragStart',\n  drag: 'onDrag',\n  dragend: 'onDragEnd',\n  zoomstart: 'onZoomStart',\n  zoom: 'onZoom',\n  zoomend: 'onZoomEnd',\n  rotatestart: 'onRotateStart',\n  rotate: 'onRotate',\n  rotateend: 'onRotateEnd',\n  pitchstart: 'onPitchStart',\n  pitch: 'onPitch',\n  pitchend: 'onPitchEnd'\n};\nvar otherEvents = {\n  wheel: 'onWheel',\n  boxzoomstart: 'onBoxZoomStart',\n  boxzoomend: 'onBoxZoomEnd',\n  boxzoomcancel: 'onBoxZoomCancel',\n  resize: 'onResize',\n  load: 'onLoad',\n  render: 'onRender',\n  idle: 'onIdle',\n  remove: 'onRemove',\n  data: 'onData',\n  styledata: 'onStyleData',\n  sourcedata: 'onSourceData',\n  error: 'onError'\n};\nvar settingNames = ['minZoom', 'maxZoom', 'minPitch', 'maxPitch', 'maxBounds', 'projection', 'renderWorldCopies'];\nvar handlerNames = ['scrollZoom', 'boxZoom', 'dragRotate', 'dragPan', 'keyboard', 'doubleClickZoom', 'touchZoomRotate', 'touchPitch'];\n/**\r\n * A wrapper for mapbox-gl's Map class\r\n */\nvar Mapbox = /*#__PURE__*/function () {\n  function Mapbox(MapClass, props, container) {\n    var _this = this;\n    _classCallCheck(this, Mapbox);\n    // mapboxgl.Map instance. Not using type here because we are accessing\n    // private members and methods\n    this._map = null;\n    // Internal states\n    this._internalUpdate = false;\n    this._inRender = false;\n    this._hoveredFeatures = null;\n    this._deferredEvents = {\n      move: false,\n      zoom: false,\n      pitch: false,\n      rotate: false\n    };\n    this._onEvent = function (e) {\n      // @ts-ignore\n      var cb = _this.props[otherEvents[e.type]];\n      if (cb) {\n        cb(e);\n      }\n    };\n    this._onPointerEvent = function (e) {\n      if (e.type === 'mousemove' || e.type === 'mouseout') {\n        _this._updateHover(e);\n      }\n      // @ts-ignore\n      var cb = _this.props[pointerEvents[e.type]];\n      if (cb) {\n        if (_this.props.interactiveLayerIds && e.type !== 'mouseover' && e.type !== 'mouseout') {\n          var features = _this._hoveredFeatures || _this._map.queryRenderedFeatures(e.point, {\n            layers: _this.props.interactiveLayerIds\n          });\n          e.features = features;\n        }\n        cb(e);\n        delete e.features;\n      }\n    };\n    this._onCameraEvent = function (e) {\n      if (!_this._internalUpdate) {\n        // @ts-ignore\n        var cb = _this.props[cameraEvents[e.type]];\n        if (cb) {\n          cb(e);\n        }\n      }\n      if (e.type in _this._deferredEvents) {\n        _this._deferredEvents[e.type] = false;\n      }\n    };\n    this._MapClass = MapClass;\n    this.props = props;\n    this._initialize(container);\n  }\n  _createClass(Mapbox, [{\n    key: \"map\",\n    get: function get() {\n      return this._map;\n    }\n  }, {\n    key: \"transform\",\n    get: function get() {\n      return this._renderTransform;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      var oldProps = this.props;\n      this.props = props;\n      var settingsChanged = this._updateSettings(props, oldProps);\n      if (settingsChanged) {\n        this._createShadowTransform(this._map);\n      }\n      var sizeChanged = this._updateSize(props);\n      var viewStateChanged = this._updateViewState(props, true);\n      this._updateStyle(props, oldProps);\n      this._updateStyleComponents(props, oldProps);\n      this._updateHandlers(props, oldProps);\n      // If 1) view state has changed to match props and\n      //    2) the props change is not triggered by map events,\n      // it's driven by an external state change. Redraw immediately\n      if (settingsChanged || sizeChanged || viewStateChanged && !this._map.isMoving()) {\n        this.redraw();\n      }\n    }\n  }, {\n    key: \"_initialize\",\n    value: /* eslint-disable complexity,max-statements */\n    function _initialize(container) {\n      var _this2 = this;\n      var props = this.props;\n      var mapOptions = _objectSpread(_objectSpread(_objectSpread({}, props), props.initialViewState), {}, {\n        accessToken: props.mapboxAccessToken || getAccessTokenFromEnv() || null,\n        container: container,\n        style: normalizeStyle(props.mapStyle)\n      });\n      var viewState = mapOptions.initialViewState || mapOptions.viewState || mapOptions;\n      Object.assign(mapOptions, {\n        center: [viewState.longitude || 0, viewState.latitude || 0],\n        zoom: viewState.zoom || 0,\n        pitch: viewState.pitch || 0,\n        bearing: viewState.bearing || 0\n      });\n      if (props.gl) {\n        // eslint-disable-next-line\n        var getContext = HTMLCanvasElement.prototype.getContext;\n        // Hijack canvas.getContext to return our own WebGLContext\n        // This will be called inside the mapboxgl.Map constructor\n        // @ts-expect-error\n        HTMLCanvasElement.prototype.getContext = function () {\n          // Unhijack immediately\n          HTMLCanvasElement.prototype.getContext = getContext;\n          return props.gl;\n        };\n      }\n      var map = new this._MapClass(mapOptions);\n      // Props that are not part of constructor options\n      if (viewState.padding) {\n        map.setPadding(viewState.padding);\n      }\n      if (props.cursor) {\n        map.getCanvas().style.cursor = props.cursor;\n      }\n      this._createShadowTransform(map);\n      // Hack\n      // Insert code into map's render cycle\n      var renderMap = map._render;\n      map._render = function (arg) {\n        _this2._inRender = true;\n        renderMap.call(map, arg);\n        _this2._inRender = false;\n      };\n      var runRenderTaskQueue = map._renderTaskQueue.run;\n      map._renderTaskQueue.run = function (arg) {\n        runRenderTaskQueue.call(map._renderTaskQueue, arg);\n        _this2._onBeforeRepaint();\n      };\n      map.on('render', function () {\n        return _this2._onAfterRepaint();\n      });\n      // Insert code into map's event pipeline\n      var fireEvent = map.fire;\n      map.fire = this._fireEvent.bind(this, fireEvent);\n      // add listeners\n      map.on('resize', function () {\n        _this2._renderTransform.resize(map.transform.width, map.transform.height);\n      });\n      map.on('styledata', function () {\n        return _this2._updateStyleComponents(_this2.props, {});\n      });\n      map.on('sourcedata', function () {\n        return _this2._updateStyleComponents(_this2.props, {});\n      });\n      for (var eventName in pointerEvents) {\n        map.on(eventName, this._onPointerEvent);\n      }\n      for (var _eventName in cameraEvents) {\n        map.on(_eventName, this._onCameraEvent);\n      }\n      for (var _eventName2 in otherEvents) {\n        map.on(_eventName2, this._onEvent);\n      }\n      this._map = map;\n    }\n    /* eslint-enable complexity,max-statements */\n  }, {\n    key: \"recycle\",\n    value: function recycle() {\n      Mapbox.savedMaps.push(this);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this._map.remove();\n    }\n    // Force redraw the map now. Typically resize() and jumpTo() is reflected in the next\n    // render cycle, which is managed by Mapbox's animation loop.\n    // This removes the synchronization issue caused by requestAnimationFrame.\n  }, {\n    key: \"redraw\",\n    value: function redraw() {\n      var map = this._map;\n      // map._render will throw error if style does not exist\n      // https://github.com/mapbox/mapbox-gl-js/blob/fb9fc316da14e99ff4368f3e4faa3888fb43c513\n      //   /src/ui/map.js#L1834\n      if (!this._inRender && map.style) {\n        // cancel the scheduled update\n        if (map._frame) {\n          map._frame.cancel();\n          map._frame = null;\n        }\n        // the order is important - render() may schedule another update\n        map._render();\n      }\n    }\n  }, {\n    key: \"_createShadowTransform\",\n    value: function _createShadowTransform(map) {\n      var renderTransform = cloneTransform(map.transform);\n      map.painter.transform = renderTransform;\n      this._renderTransform = renderTransform;\n    }\n    /* Trigger map resize if size is controlled\r\n       @param {object} nextProps\r\n       @returns {bool} true if size has changed\r\n     */\n  }, {\n    key: \"_updateSize\",\n    value: function _updateSize(nextProps) {\n      // Check if size is controlled\n      var viewState = nextProps.viewState;\n      if (viewState) {\n        var map = this._map;\n        if (viewState.width !== map.transform.width || viewState.height !== map.transform.height) {\n          map.resize();\n          return true;\n        }\n      }\n      return false;\n    }\n    // Adapted from map.jumpTo\n    /* Update camera to match props\r\n       @param {object} nextProps\r\n       @param {bool} triggerEvents - should fire camera events\r\n       @returns {bool} true if anything is changed\r\n     */\n  }, {\n    key: \"_updateViewState\",\n    value: function _updateViewState(nextProps, triggerEvents) {\n      if (this._internalUpdate) {\n        return false;\n      }\n      var map = this._map;\n      var tr = this._renderTransform;\n      // Take a snapshot of the transform before mutation\n      var zoom = tr.zoom,\n        pitch = tr.pitch,\n        bearing = tr.bearing;\n      var isMoving = map.isMoving();\n      if (isMoving) {\n        // All movement of the camera is done relative to the sea level\n        tr.cameraElevationReference = 'sea';\n      }\n      var changed = applyViewStateToTransform(tr, _objectSpread(_objectSpread({}, transformToViewState(map.transform)), nextProps));\n      if (isMoving) {\n        // Reset camera reference\n        tr.cameraElevationReference = 'ground';\n      }\n      if (changed && triggerEvents) {\n        var deferredEvents = this._deferredEvents;\n        // Delay DOM control updates to the next render cycle\n        deferredEvents.move = true;\n        deferredEvents.zoom || (deferredEvents.zoom = zoom !== tr.zoom);\n        deferredEvents.rotate || (deferredEvents.rotate = bearing !== tr.bearing);\n        deferredEvents.pitch || (deferredEvents.pitch = pitch !== tr.pitch);\n      }\n      // Avoid manipulating the real transform when interaction/animation is ongoing\n      // as it would interfere with Mapbox's handlers\n      if (!isMoving) {\n        applyViewStateToTransform(map.transform, nextProps);\n      }\n      return changed;\n    }\n    /* Update camera constraints and projection settings to match props\r\n       @param {object} nextProps\r\n       @param {object} currProps\r\n       @returns {bool} true if anything is changed\r\n     */\n  }, {\n    key: \"_updateSettings\",\n    value: function _updateSettings(nextProps, currProps) {\n      var map = this._map;\n      var changed = false;\n      var _iterator = _createForOfIteratorHelper(settingNames),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var propName = _step.value;\n          if (propName in nextProps && !deepEqual(nextProps[propName], currProps[propName])) {\n            changed = true;\n            map[\"set\".concat(propName[0].toUpperCase()).concat(propName.slice(1))](nextProps[propName]);\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      return changed;\n    }\n    /* Update map style to match props\r\n       @param {object} nextProps\r\n       @param {object} currProps\r\n       @returns {bool} true if style is changed\r\n     */\n  }, {\n    key: \"_updateStyle\",\n    value: function _updateStyle(nextProps, currProps) {\n      if (nextProps.cursor !== currProps.cursor) {\n        this._map.getCanvas().style.cursor = nextProps.cursor;\n      }\n      if (nextProps.mapStyle !== currProps.mapStyle) {\n        var options = {\n          diff: nextProps.styleDiffing\n        };\n        if ('localIdeographFontFamily' in nextProps) {\n          options.localIdeographFontFamily = nextProps.localIdeographFontFamily;\n        }\n        this._map.setStyle(normalizeStyle(nextProps.mapStyle), options);\n        return true;\n      }\n      return false;\n    }\n    /* Update fog, light and terrain to match props\r\n       @param {object} nextProps\r\n       @param {object} currProps\r\n       @returns {bool} true if anything is changed\r\n     */\n  }, {\n    key: \"_updateStyleComponents\",\n    value: function _updateStyleComponents(nextProps, currProps) {\n      var map = this._map;\n      var changed = false;\n      if (map.style.loaded()) {\n        if ('light' in nextProps && !deepEqual(nextProps.light, currProps.light)) {\n          changed = true;\n          map.setLight(nextProps.light);\n        }\n        if ('fog' in nextProps && !deepEqual(nextProps.fog, currProps.fog)) {\n          changed = true;\n          map.setFog(nextProps.fog);\n        }\n        if ('terrain' in nextProps && !deepEqual(nextProps.terrain, currProps.terrain)) {\n          if (!nextProps.terrain || map.getSource(nextProps.terrain.source)) {\n            changed = true;\n            map.setTerrain(nextProps.terrain);\n          }\n        }\n      }\n      return changed;\n    }\n    /* Update interaction handlers to match props\r\n       @param {object} nextProps\r\n       @param {object} currProps\r\n       @returns {bool} true if anything is changed\r\n     */\n  }, {\n    key: \"_updateHandlers\",\n    value: function _updateHandlers(nextProps, currProps) {\n      var map = this._map;\n      var changed = false;\n      var _iterator2 = _createForOfIteratorHelper(handlerNames),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var propName = _step2.value;\n          var newValue = nextProps[propName];\n          if (!deepEqual(newValue, currProps[propName])) {\n            changed = true;\n            if (newValue) {\n              map[propName].enable(newValue);\n            } else {\n              map[propName].disable();\n            }\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      return changed;\n    }\n  }, {\n    key: \"_updateHover\",\n    value: function _updateHover(e) {\n      var _a;\n      var props = this.props;\n      var shouldTrackHoveredFeatures = props.interactiveLayerIds && (props.onMouseMove || props.onMouseEnter || props.onMouseLeave);\n      if (shouldTrackHoveredFeatures) {\n        var eventType = e.type;\n        var wasHovering = ((_a = this._hoveredFeatures) === null || _a === void 0 ? void 0 : _a.length) > 0;\n        var features;\n        if (eventType === 'mousemove') {\n          try {\n            features = this._map.queryRenderedFeatures(e.point, {\n              layers: props.interactiveLayerIds\n            });\n          } catch (_b) {\n            features = [];\n          }\n        } else {\n          features = [];\n        }\n        var isHovering = features.length > 0;\n        if (!isHovering && wasHovering) {\n          e.type = 'mouseleave';\n          this._onPointerEvent(e);\n        }\n        this._hoveredFeatures = features;\n        if (isHovering && !wasHovering) {\n          e.type = 'mouseenter';\n          this._onPointerEvent(e);\n        }\n        e.type = eventType;\n      } else {\n        this._hoveredFeatures = null;\n      }\n    }\n  }, {\n    key: \"_fireEvent\",\n    value: function _fireEvent(baseFire, event, properties) {\n      var map = this._map;\n      var tr = map.transform;\n      var eventType = typeof event === 'string' ? event : event.type;\n      if (eventType === 'move') {\n        this._updateViewState(this.props, false);\n      }\n      if (eventType in cameraEvents) {\n        if (typeof event === 'object') {\n          event.viewState = transformToViewState(tr);\n        }\n        if (this._map.isMoving()) {\n          // Replace map.transform with ours during the callbacks\n          map.transform = this._renderTransform;\n          baseFire.call(map, event, properties);\n          map.transform = tr;\n          return map;\n        }\n      }\n      baseFire.call(map, event, properties);\n      return map;\n    }\n    // All camera manipulations are complete, ready to repaint\n  }, {\n    key: \"_onBeforeRepaint\",\n    value: function _onBeforeRepaint() {\n      var _this3 = this;\n      var map = this._map;\n      // If there are camera changes driven by props, invoke camera events so that DOM controls are synced\n      this._internalUpdate = true;\n      for (var eventType in this._deferredEvents) {\n        if (this._deferredEvents[eventType]) {\n          map.fire(eventType);\n        }\n      }\n      this._internalUpdate = false;\n      var tr = this._map.transform;\n      // Make sure camera matches the current props\n      this._map.transform = this._renderTransform;\n      this._onAfterRepaint = function () {\n        // Restores camera state before render/load events are fired\n        _this3._map.transform = tr;\n      };\n    }\n  }], [{\n    key: \"reuse\",\n    value: function reuse(props, container) {\n      var that = Mapbox.savedMaps.pop();\n      if (!that) {\n        return null;\n      }\n      var map = that.map;\n      // When reusing the saved map, we need to reparent the map(canvas) and other child nodes\n      // intoto the new container from the props.\n      // Step1: reparenting child nodes from old container to new container\n      var oldContainer = map.getContainer();\n      container.className = oldContainer.className;\n      while (oldContainer.childNodes.length > 0) {\n        container.appendChild(oldContainer.childNodes[0]);\n      }\n      // Step2: replace the internal container with new container from the react component\n      // @ts-ignore\n      map._container = container;\n      // Step 3: apply new props\n      that.setProps(_objectSpread(_objectSpread({}, props), {}, {\n        styleDiffing: false\n      }));\n      map.resize();\n      var initialViewState = props.initialViewState;\n      if (initialViewState) {\n        if (initialViewState.bounds) {\n          map.fitBounds(initialViewState.bounds, _objectSpread(_objectSpread({}, initialViewState.fitBoundsOptions), {}, {\n            duration: 0\n          }));\n        } else {\n          that._updateViewState(initialViewState, false);\n        }\n      }\n      // Simulate load event\n      if (map.isStyleLoaded()) {\n        map.fire('load');\n      } else {\n        map.once('styledata', function () {\n          return map.fire('load');\n        });\n      }\n      return that;\n    }\n  }]);\n  return Mapbox;\n}();\nexport { Mapbox as default };\nMapbox.savedMaps = [];\n/**\r\n * Access token can be provided via one of:\r\n *   mapboxAccessToken prop\r\n *   access_token query parameter\r\n *   MapboxAccessToken environment variable\r\n *   REACT_APP_MAPBOX_ACCESS_TOKEN environment variable\r\n * @returns access token\r\n */\nfunction getAccessTokenFromEnv() {\n  var accessToken = null;\n  /* global location, process */\n  if (typeof location !== 'undefined') {\n    var match = /access_token=([^&\\/]*)/.exec(location.search);\n    accessToken = match && match[1];\n  }\n  // Note: This depends on bundler plugins (e.g. webpack) importing environment correctly\n  try {\n    accessToken = accessToken || process.env.MapboxAccessToken;\n  } catch (_a) {\n    // ignore\n  }\n  try {\n    accessToken = accessToken || process.env.REACT_APP_MAPBOX_ACCESS_TOKEN;\n  } catch (_b) {\n    // ignore\n  }\n  return accessToken;\n}","map":{"version":3,"mappings":"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","names":["transformToViewState","applyViewStateToTransform","cloneTransform","normalizeStyle","deepEqual","pointerEvents","mousedown","mouseup","mouseover","mousemove","click","dblclick","mouseenter","mouseleave","mouseout","contextmenu","touchstart","touchend","touchmove","touchcancel","cameraEvents","movestart","move","moveend","dragstart","drag","dragend","zoomstart","zoom","zoomend","rotatestart","rotate","rotateend","pitchstart","pitch","pitchend","otherEvents","wheel","boxzoomstart","boxzoomend","boxzoomcancel","resize","load","render","idle","remove","data","styledata","sourcedata","error","settingNames","handlerNames","Mapbox","MapClass","props","container","e","cb","type","_updateHover","interactiveLayerIds","features","_hoveredFeatures","_map","queryRenderedFeatures","point","layers","_internalUpdate","_deferredEvents","_MapClass","_initialize","_renderTransform","oldProps","settingsChanged","_updateSettings","_createShadowTransform","sizeChanged","_updateSize","viewStateChanged","_updateViewState","_updateStyle","_updateStyleComponents","_updateHandlers","isMoving","redraw","mapOptions","initialViewState","accessToken","mapboxAccessToken","getAccessTokenFromEnv","style","mapStyle","viewState","Object","assign","center","longitude","latitude","bearing","gl","getContext","HTMLCanvasElement","prototype","map","padding","setPadding","cursor","getCanvas","renderMap","_render","arg","_inRender","call","runRenderTaskQueue","_renderTaskQueue","run","_onBeforeRepaint","on","_onAfterRepaint","fireEvent","fire","_fireEvent","bind","transform","width","height","eventName","_onPointerEvent","_onCameraEvent","_onEvent","savedMaps","push","_frame","cancel","renderTransform","painter","nextProps","triggerEvents","tr","cameraElevationReference","changed","deferredEvents","currProps","propName","toUpperCase","slice","options","diff","styleDiffing","localIdeographFontFamily","setStyle","loaded","light","setLight","fog","setFog","terrain","getSource","source","setTerrain","newValue","enable","disable","shouldTrackHoveredFeatures","onMouseMove","onMouseEnter","onMouseLeave","eventType","wasHovering","length","isHovering","baseFire","event","properties","that","pop","oldContainer","getContainer","className","childNodes","appendChild","_container","setProps","bounds","fitBounds","fitBoundsOptions","duration","isStyleLoaded","once","location","match","exec","search","process","env","MapboxAccessToken","REACT_APP_MAPBOX_ACCESS_TOKEN"],"sourceRoot":"","sources":["../../../src/mapbox/mapbox.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}